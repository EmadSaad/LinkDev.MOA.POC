<app-breadcrumb [CurrnetComponentName]="'OperatingLicenseRequest'"></app-breadcrumb>


<div class="form-wrapper mb-0">

  <div class="row">

    <div class="col-lg-3 mb-0">

      <div class="h-100">

        <app-side-stages [activeFirstLevel]="ActiveLevelOne" [activeSecondLevel]="ActiveLevelTwo"
          [structure]="formStructure" (onChange)="onSelect($event)">
        </app-side-stages>

      </div>


    </div>

    <div class="col-lg-9">

      <h1 class="page-title">
        {{'OperatingLicenseRequest.OperatingLicenseRequestName' | translate}}
      </h1>

      <!--Request-Header-->
      <app-app-header [appHeader]="Application.ApplicationHeader" class="mt-2">
      </app-app-header>

      <!-- Start Stage 1 -->

      <div [hidden]="ActiveLevelOne !== 1">

        <!--Validation-Message-->
        <div class="alert alert-light" role="alert" *ngIf="!OperatingLicenseRequestId">
          <i class="icon-info"></i>
          {{'FORM_VALIDATION_MESSAGE' | translate}}
        </div>

        <app-request-submission-info [submissionAlertClass]="this.submissionAlertClass"
          [submissionInfo]="this.submissionInfo">
        </app-request-submission-info>

        <form #stageOne="ngForm" novalidate autocomplete="off">

          <div class="row">
            <div class="col-lg-4 col-md-6">

              <mutliselect id="CRId" name="CRId" [label]="'OperatingLicenseRequest.CR'" [propertyToSelect]="'Value'"
                [options]="lookupService.lookupEntities['account_CRsByTypeInvestor']"
                [viewMode]="OperatingLicenseRequestId != undefined" [multiple]="false" [config]="config"
                [(ngModel)]="Application.Request.CRId" [required]="true" [disabled]="false" [isRequiredLabel]="true"
                (change)="cRChanged()" #CRId="ngModel">
              </mutliselect>

              <app-validation-viewer [requiredValidations]="{'required':'Validations.Required'}" [controlName]="CRId"
                [form]="stageOne" [submit]="isSubmitDraft||Application.IsSubmitted">
              </app-validation-viewer>

            </div>

            <app-info-viewer [isLoading]="isCurrentCR" [modalFormTitleKey]="'OperatingLicenseRequest.CRInfo'"
              name="CRInfo" *ngIf="Application.Request.CRId">

              <div class="row">

                <div class="col-lg-4 col-md-6">

                  <custom-text-box [type]="'text'" name="CurrentCRType" #CurrentCRType="ngModel"
                    [(ngModel)]="CurrentCR.CRType" [label]="'ContractSubmission.Type'" autocomplete="" aria-label="Name"
                    [isReadOnly]="true">
                  </custom-text-box>

                </div>

                <div class="col-lg-4 col-md-6">

                  <custom-text-box [type]="'text'" name="CurrentCRNumber" #CurrentCRNumber="ngModel"
                    [(ngModel)]="CurrentCR.CRNumber" [label]="'ContractSubmission.CRNumber'" autocomplete=""
                    aria-label="Name" [isReadOnly]="true">
                  </custom-text-box>

                </div>

                <div class="col-lg-4 col-md-6">

                  <label>
                    {{'ContractSubmission.CRIssuanceDate' | translate}}
                  </label>

                  <ngbd-datepicker-popup [(ngModel)]="CurrentCR.IssueDate" name="IssueDate" [readonly]="true">
                  </ngbd-datepicker-popup>

                </div>

                <div class="col-lg-4 col-md-6">

                  <label>
                    {{'ContractSubmission.CRExpiryDate' | translate}}
                  </label>

                  <ngbd-datepicker-popup [(ngModel)]="CurrentCR.ExpiryDate" name="ExpiryDate"
                    [ngModelOptions]="{standalone: true}" [readonly]="true">
                  </ngbd-datepicker-popup>

                </div>

                <div class="col-lg-4 col-md-6">

                  <custom-text-box [type]="'text'" name="CurrentCRName" #CurrentCRName="ngModel"
                    [(ngModel)]="CurrentCR.CRName" [label]="'ContractSubmission.Name'" autocomplete="" aria-label="Name"
                    [isReadOnly]="true">
                  </custom-text-box>

                </div>

                <div class="col-lg-8 col-md-6">

                  <label>
                    {{'ContractSubmission.Activity' | translate}}
                  </label>

                  <textarea id="CurrentCRActivity" name="CurrentCRActivity" [readOnly]="true"
                    #CurrentCRActivity="ngModel" [(ngModel)]="CurrentCR.CRActivity" disabled>
                    </textarea>

                </div>

              </div>

              <app-grid [canAdd]="false" [canDelete]="false" [canEdit]="false"
                [tableHeadTitle]="'ContractSubmission.Owners'" [(data)]="CurrentCR.CROwners"
                [columns]="CROwnerGridcols">
              </app-grid>

            </app-info-viewer>

          </div>

          <div class="row" *ngIf="!IsCRContractsBalanceValid">
            <div class="col-lg-4 col-md-6 form-validation mb-4">
              {{crContractBalanceValidMsg}}
            </div>
          </div>

          <!-- <div class="form-validation mb-4" *ngIf="!IsCRContractsBalanceValid">
            {{crContractBalanceValidMsg}}
          </div> -->

          <div class="row">

            <div class="col-lg-4 col-md-6">

              <mutliselect id="ContractNumber" name="ContractNumber" [label]="'OperatingLicenseRequest.ContractNumber'"
                [propertyToSelect]="'Value'" [options]="lookupService.lookupEntities['ldv_contract_LookupWithId']"
                [multiple]="false" [config]="config" [viewMode]="isContractNumberReadOnly"
                [(ngModel)]="Application.Request.ContractNumberId" [required]="true" [disabled]="false"
                [isRequiredLabel]="true" #ContractNumber="ngModel" (change)="contractChanged()">
              </mutliselect>

              <app-validation-viewer [requiredValidations]="{'required':'Validations.Required'}"
                [controlName]="ContractNumber" [form]="stageOne" [submit]="isSubmitDraft||Application.IsSubmitted">
              </app-validation-viewer>


            </div>

            <app-info-viewer [isLoading]="isCurrentContract"
              [modalFormTitleKey]="'OperatingLicenseRequest.ContractInfo'" name="ContactInfo"
              *ngIf="Application.Request.ContractNumberId&&CurrentContract">

              <div class="row">

                <div class="col-lg-4 col-md-6" *ngIf="CurrentContract.CR">

                  <custom-text-box [type]="'text'" name="CRContract" #CRContract="ngModel"
                    [(ngModel)]="CurrentContract.CR.Name" [label]="'ContractSubmission.CRId'" autocomplete=""
                    aria-label="Name" [isReadOnly]="true">
                  </custom-text-box>

                </div>

                <div class="col-lg-4 col-md-6" *ngIf="CurrentContract.Industrialcity">

                  <custom-text-box [type]="'text'" name="ContractIndustrialCity" #ContractIndustrialCity="ngModel"
                    [(ngModel)]="CurrentContract.Industrialcity.Name" [label]="'ContractSubmission.IndustrialCity'"
                    autocomplete="" aria-label="Name" [isReadOnly]="true">
                  </custom-text-box>

                </div>

                <div class="col-lg-4 col-md-6" *ngIf="CurrentContract.ProductMainfamily">

                  <custom-text-box [type]="'text'" name="ContractProductMainFamily" #ContractProductMainFamily="ngModel"
                    [(ngModel)]="CurrentContract.ProductMainfamily.Name"
                    [label]="'ContractSubmission.ProductMainFamily'" autocomplete="" aria-label="Name"
                    [isReadOnly]="true">
                  </custom-text-box>

                </div>

                <div class="col-lg-4 col-md-6" *ngIf="CurrentContract.ProductSubFamily">

                  <custom-text-box [type]="'text'" name="ContractProductSubFamily" #ContractProductMainFamily="ngModel"
                    [(ngModel)]="CurrentContract.ProductSubFamily.Name" [label]="'ContractSubmission.ProductSubFamily'"
                    autocomplete="" aria-label="Name" [isReadOnly]="true">
                  </custom-text-box>

                </div>

                <div class="col-lg-4 col-md-6" *ngIf="CurrentContract.Product">

                  <custom-text-box [type]="'text'" name="ContractProduct" #ContractProduct="ngModel"
                    [(ngModel)]="CurrentContract.Product.Name" [label]="'ContractSubmission.Product'" autocomplete=""
                    aria-label="Name" [isReadOnly]="true">
                  </custom-text-box>

                </div>

                <div class="col-lg-4 col-md-6">

                  <custom-text-box [type]="'text'" name="ContractConstructionAmountValue"
                    #ContractConstructionAmountValue="ngModel" [(ngModel)]="CurrentContract.ConstructionContractStatus"
                    [label]="'ContractSubmission.ConstructionAmountValue'" autocomplete="" aria-label="Name"
                    [isReadOnly]="true">
                  </custom-text-box>



                </div>

                <div class="col-lg-4 col-md-6">

                  <custom-text-box [type]="'text'" name="ContractLegalStatus" #ContractLegalStatus="ngModel"
                    [(ngModel)]="CurrentContract.LegalStatus" [label]="'OperatingLicenseRequest.LegalStatus'"
                    autocomplete="" aria-label="Name" [isReadOnly]="true">
                  </custom-text-box>

                </div>

                <div class="col-lg-4 col-md-6">

                  <custom-text-box [type]="'text'" name="ContractPricingdate" #ContractPricingdate="ngModel"
                    [(ngModel)]="CurrentContract.Pricingdate" [label]="'OperatingLicenseRequest.Pricingdate'"
                    autocomplete="" aria-label="Name" [isReadOnly]="true">
                  </custom-text-box>

                </div>

                <div class="col-lg-4 col-md-6">

                  <custom-text-box [type]="'text'" name="ContractFileNumber" #ContractFileNumber="ngModel"
                    [(ngModel)]="CurrentContract.FileNumber" [label]="'OperatingLicenseRequest.FileNumber'"
                    autocomplete="" aria-label="Name" [isReadOnly]="true">
                  </custom-text-box>

                </div>

                <div class="col-lg-4 col-md-6">

                  <label>
                    {{'OperatingLicenseRequest.ContractStartingDate' | translate}}
                  </label>

                  <ngbd-datepicker-popup [(ngModel)]="CurrentContract.ContractStartingDate" [readonly]="true"
                    name="ContractStartingDate">
                  </ngbd-datepicker-popup>

                </div>

                <div class="col-lg-4 col-md-6">

                  <!-- {{CurrentContract.ContractStartingDate | json}} -->
                  <label>
                    {{'OperatingLicenseRequest.ContractExpiryDate' | translate}}
                  </label>

                  <ngbd-datepicker-popup [(ngModel)]="CurrentContract.ContractExpiryDate" [readonly]="true"
                    name="ContractExpiryDate">
                  </ngbd-datepicker-popup>

                </div>

              </div>

              <app-grid *ngIf="contactDetailsfromContract && contactDetailsfromContract.length > 0" [canAdd]="false"
                [canDelete]="false" [canEdit]="false" [modalFormTitle]="'ContractContactsDetails'"
                [tableHeadTitle]="'OperatingLicenseRequest.ContactDetails'" [(data)]="contactDetailsfromContract"
                [columns]="gridcols" [(model)]="gridModel" [canAdd]="false" [canEdit]="false" [canDelete]="false">
              </app-grid>

            </app-info-viewer>

          </div>

          <div class="row" *ngIf="!IsRequestValid">
            <div class="col-lg-4 col-md-6 form-validation mb-4">
              {{requestValidMsg}}
            </div>
          </div>

          <div class="row">

            <div class="col-lg-4 col-md-6">

              <mutliselect id="BuildingLicenseNumber" name="BuildingLicenseNumber"
                [label]="'OperatingLicenseRequest.BuildingLicenseNumber'" [propertyToSelect]="'Value'"
                [options]="lookupService.lookupEntities['ldv_buildinglicense_LookupWithId']" [multiple]="false"
                [config]="config" [viewMode]="isBuildingLicenseReadOnly"
                [(ngModel)]="Application.Request.BuildingLicenseNumberId" [required]="true" [disabled]="false"
                [isRequiredLabel]="true" #BuildingLicenseNumber="ngModel">
              </mutliselect>



              <app-validation-viewer [requiredValidations]="{'required':'Validations.Required'}"
                [controlName]="BuildingLicenseNumber" [form]="stageOne"
                [submit]="isSubmitDraft||Application.IsSubmitted">
              </app-validation-viewer>


            </div>


          </div>

          <div class="row">

            <div class="col-lg-4 col-md-6">

              <mutliselect id="LicenseType" name="LicenseType" [label]="'OperatingLicenseRequest.LicenseType'"
                [propertyToSelect]="'Value'"
                [options]="lookupService.lookupEntities['ldv_operatinglicensetype_LookupWithId']" [multiple]="false"
                [config]="config" [viewMode]="true" [(ngModel)]="Application.Request.LicenseTypeId" [required]="true"
                [disabled]="false" [isRequiredLabel]="true" #LicenseType="ngModel">
              </mutliselect>

              <app-validation-viewer [requiredValidations]="{'required':'Validations.Required'}"
                [controlName]="LicenseType" [form]="stageOne" [submit]="isSubmitDraft||Application.IsSubmitted">
              </app-validation-viewer>





            </div>

            <div class="col-lg-4 col-md-6" [hidden]="!isShowOldLicenseNumber">
              <mutliselect id="OldLicenseNumber" name="OldLicenseNumber"
                [label]="'OperatingLicenseRequest.OldLicenseNumber'" [propertyToSelect]="'Value'"
                [options]="lookupService.lookupEntities['ldv_operatinglicensesbuildingcompletioncert_LookupWithId']"
                [multiple]="false" [config]="config" [viewMode]="OperatingLicenseRequestId !== undefined"
                [(ngModel)]="Application.Request.OldLicenseNumberId" [required]="isShowOldLicenseNumber"
                [disabled]="false" [isRequiredLabel]="isShowOldLicenseNumber" #OldLicenseNumber="ngModel">
              </mutliselect>

              <app-validation-viewer [requiredValidations]="{'required':'Validations.Required'}"
                [controlName]="OldLicenseNumber" [form]="stageOne" [submit]="Application.IsSubmitted">
              </app-validation-viewer>




            </div>

          </div>

          <div class="row">

            <div class="col-lg-4 col-md-6">

              <label>
                {{'OperatingLicenseRequest.MaintenanceContractStartDate' | translate}}
              </label>

              <ngbd-datepicker-popup [(ngModel)]="Application.Request.MaintenanceContractStartDate"
                #MaintenanceContractStartDate="ngModel" name="MaintenanceContractStartDate"
                [placeholder]="'OperatingLicenseRequest.MaintenanceContractStartDate' | translate"
                [readonly]="Application.IsReadOnly">
              </ngbd-datepicker-popup>

            </div>

            <div class="col-lg-4 col-md-6"
              [ngClass]="{'required': MaintenanceContractEndDate.errors&&Application.IsSubmitted}">

              <label>
                {{'OperatingLicenseRequest.MaintenanceContractEndDate' | translate}}
                <span class="required"> *</span>
              </label>

              <ngbd-datepicker-popup [(ngModel)]="Application.Request.MaintenanceContractEndDate"
                #MaintenanceContractEndDate="ngModel" name="MaintenanceContractEndDate"
                [placeholder]="'OperatingLicenseRequest.MaintenanceContractEndDate' | translate" [required]="true"
                [readonly]="Application.IsReadOnly">
              </ngbd-datepicker-popup>

              <app-validation-viewer [requiredValidations]="{'required':'Validations.Required'}"
                [controlName]="MaintenanceContractEndDate" [form]="stageOne" [submit]="Application.IsSubmitted">
              </app-validation-viewer>
              <div class="form-validation mb-4" *ngIf="!IsMaintenanceDateValid">
                {{'OperatingLicenseRequest.MaintenanceValidation' | translate}}
              </div>

            </div>

          </div>


          <div class="row">

            <div class="col-lg-4 col-md-6" [hidden]="!isShowModonComment">

              <app-textarea [label]="'OperatingLicenseRequest.IndustrialCityAdminComment'"
                [(ngModel)]="Application.Request.IndustrialCityAdminComment" [disabled]="true"
                #IndustrialCityAdminComment="ngModel" name="IndustrialCityAdminComment">
              </app-textarea>

            </div>

          </div>
          <!-- [viewMode]="Application.Request.IsSubmitted" -->
          <div class="row">

            <div class="col-lg-4 col-md-6">

              <mutliselect id="Contacts" name="Contacts" [label]="'OperatingLicenseRequest.Contacts'"
                [propertyToSelect]="'Value'"
                [options]="lookupService.lookupEntities['ldv_contactdetails_ContactDetails']"
                [viewMode]="Application.IsReadOnly" [multiple]="true" [config]="config"
                [(ngModel)]="Application.Request.Contacts" [required]="false" [disabled]="false"
                [isRequiredLabel]="false" #Contacts="ngModel" (change)="onContactChange($event)">
              </mutliselect>

            </div>

          </div>

          <!-- contact Details grid -->
          <div class="row">
            <div class="col-12">
              <app-grid
                *ngIf="Application.Request.Contacts && Application.Request.Contacts.length>0 && lookupService.lookupEntities['ldv_contactdetails_ContactDetails']"
                [modalFormTitle]="'Biddings'" [tableHeadTitle]="'OperatingLicenseRequest.ContactDetails'"
                [(data)]="contactsList" [columns]="gridcols" [(model)]="gridModel" [canAdd]="false" [canEdit]="false"
                [canDelete]="false">
              </app-grid>
            </div>

          </div>




          <div class="row">

            <div class="col-lg-6 col-md-6">

              <app-Uploaders-List [uploaders]="Application.Documents" [SectionName]="'Safety'" [IsLiveChanges]="true"
                [IsReadOnly]="Application.IsReadOnly">
              </app-Uploaders-List>

            </div>

            <div class="col-lg-6 col-md-6">

              <app-Uploaders-List [uploaders]="Application.Documents" [SectionName]="'general'" [IsLiveChanges]="true"
                [IsReadOnly]="Application.IsReadOnly">
              </app-Uploaders-List>

            </div>


          </div>

          <div class="row">

            <div class="col-lg-6 col-md-6">

              <app-Uploaders-List [uploaders]="Application.Documents" [SectionName]="'Maintenance'"
                [IsLiveChanges]="true" [IsReadOnly]="Application.IsReadOnly">
              </app-Uploaders-List>

            </div>

            <div class="col-lg-6 col-md-6">

              <app-Uploaders-List [uploaders]="Application.Documents" [SectionName]="'OtherAttachments'"
                [IsLiveChanges]="true" [IsReadOnly]="Application.IsReadOnly">
              </app-Uploaders-List>

            </div>


          </div>


          <div
            class="col form-footer position-relative d-flex flex-column justify-content-center flex-md-row justify-content-md-between">

            <button class="main-btn-secondary"
              [disabled]="!IsRequestValid || !IsCRContractsBalanceValid || disableDraft" (click)="SaveAsDraft()">
              {{'ServicesCommon.SaveAsDraft' | translate}}
            </button>

            <button class="main-btn" [disabled]="!IsRequestValid || Application.IsReadOnly ||
            !IsCRContractsBalanceValid || Application.Request.IsSubmitted" (click)="Submit()">
              {{'ServicesCommon.Submit' | translate}}
            </button>

          </div>



        </form>

      </div>

      <!-- End Stage 1 -->


      <!-- Start Stage 2 | Certificate Details-->

      <div class="mt-4" [hidden]="ActiveLevelOne !== 2">

        <div class="row">

          <div class="col-lg-6 col-md-6" *ngIf="Application.Request.OperatingLicensesCertificate">

            <custom-text-box [type]="'text'" [label]="'OperatingLicenseCertificate.CRName'"
              [(ngModel)]="CertificateDetails.CRName" #CRName="ngModel" name="CRName" [isRequiredLabel]="false"
              [isReadOnly]="true">
            </custom-text-box>

          </div>

          <div class="col-lg-6 col-md-6" *ngIf="Application.Request.OperatingLicensesCertificate">

            <custom-text-box [type]="'text'" [label]="'OperatingLicenseCertificate.POBox'"
              [(ngModel)]="CertificateDetails.POBox" #POBox="ngModel" name="POBox" [isRequiredLabel]="false"
              [isReadOnly]="true">
            </custom-text-box>

          </div>

        </div>

        <div class="row">

          <div class="col-lg-6 col-md-6" *ngIf="Application.Request.OperatingLicensesCertificate">

            <custom-text-box [type]="'text'" [label]="'OperatingLicenseCertificate.PostalCode'"
              [(ngModel)]="CertificateDetails.PostalCode" #PostalCode="ngModel" name="PostalCode"
              [isRequiredLabel]="false" [isReadOnly]="true">
            </custom-text-box>

          </div>

          <div class="col-lg-6 col-md-6" *ngIf="Application.Request.OperatingLicensesCertificate">

            <custom-text-box [type]="'text'" [label]="'OperatingLicenseCertificate.AccountPhone'"
              [(ngModel)]="CertificateDetails.AccountPhone" #AccountPhone="ngModel" name="AccountPhone"
              [isRequiredLabel]="false" [isReadOnly]="true">
            </custom-text-box>

          </div>

        </div>

        <div class="row">

          <div class="col-lg-6 col-md-6" *ngIf="Application.Request.OperatingLicensesCertificate">

            <custom-text-box [type]="'text'" [label]="'OperatingLicenseCertificate.Fax'"
              [(ngModel)]="CertificateDetails.Fax" #Fax="ngModel" name="Fax" [isRequiredLabel]="false"
              [isReadOnly]="true">
            </custom-text-box>

          </div>

          <div class="col-lg-6 col-md-6" *ngIf="Application.Request.OperatingLicensesCertificate">

            <custom-text-box [type]="'text'" [label]="'OperatingLicenseCertificate.CRType'"
              [(ngModel)]="CertificateDetails.CRType" #CRType="ngModel" name="CRType" [isRequiredLabel]="false"
              [isReadOnly]="true">
            </custom-text-box>

          </div>

        </div>

        <div class="row">

          <div class="col-lg-6 col-md-6"
            *ngIf="Application.Request.OperatingLicensesCertificate && CertificateDetails.IndustrialCity">

            <custom-text-box [type]="'text'" [label]="'OperatingLicenseCertificate.IndustrialCity'"
              [(ngModel)]="CertificateDetails.IndustrialCity.Name" #CertificateIndustrialCity="ngModel"
              name="CertificateIndustrialCity" [isRequiredLabel]="false" [isReadOnly]="true">
            </custom-text-box>

          </div>

          <div class="col-lg-6 col-md-6" *ngIf="Application.Request.OperatingLicensesCertificate">

            <custom-text-box [type]="'text'" [label]="'OperatingLicenseCertificate.LicenseNumber'"
              [(ngModel)]="CertificateDetails.LicenseNumber" #LicenseNumber="ngModel" name="LicenseNumber"
              [isRequiredLabel]="false" [isReadOnly]="true">
            </custom-text-box>

          </div>

        </div>

        <div class="row">

          <div class="col-lg-6 col-md-6" *ngIf="Application.Request.OperatingLicensesCertificate">

            <label>
              {{'OperatingLicenseCertificate.LicenceStartDate' | translate}}
            </label>
            <ngbd-datepicker-popup [(ngModel)]="CertificateDetails.LicenceStartDate" name="LicenceStartDate"
              [readonly]="true">
            </ngbd-datepicker-popup>

          </div>

          <div class="col-lg-6 col-md-6" *ngIf="Application.Request.OperatingLicensesCertificate">
            <label>
              {{'OperatingLicenseCertificate.LicenceExpiryDate' | translate}}
            </label>
            <ngbd-datepicker-popup [(ngModel)]="CertificateDetails.LicenceExpiryDate" name="LicenceExpiryDate"
              [readonly]="true">
            </ngbd-datepicker-popup>


          </div>

        </div>

        <!-- <div class="row">

          <div class="col-lg-6 col-md-6" *ngIf="Application.Request.OperatingLicensesCertificate">

            <label>
              {{'OperatingLicenseCertificate.LicenceExpiryDate' | translate}}
            </label>
            <ngbd-datepicker-popup [(ngModel)]="CertificateDetails.LicenceExpiryDate" name="LicenceExpiryDate"
              [readonly]="true">
            </ngbd-datepicker-popup>

          </div>

        </div> -->

        <div class="row">

          <div class="col-lg-6 col-md-6"
            *ngIf="Application.Request.OperatingLicensesCertificate&&CertificateDetails.ContractNumber">

            <custom-text-box [type]="'text'" [label]="'OperatingLicenseCertificate.ContractNumber'"
              [(ngModel)]="CertificateDetails.ContractNumber.Name" #ContractNumber="ngModel" name="ContractNumber"
              [isRequiredLabel]="false" [isReadOnly]="true">
            </custom-text-box>

          </div>
          <app-info-viewer [isLoading]="isCurrentContract" [modalFormTitleKey]="'OperatingLicenseRequest.ContractInfo'"
            name="ContactInfo" *ngIf="Application.Request.ContractNumberId&&CurrentContract">

            <div class="row">

              <div class="col-lg-4 col-md-6" *ngIf="CurrentContract.CR">

                <custom-text-box [type]="'text'" name="CRContract" #CRContract="ngModel"
                  [(ngModel)]="CurrentContract.CR.Name" [label]="'ContractSubmission.CRId'" autocomplete=""
                  aria-label="Name" [isReadOnly]="true">
                </custom-text-box>

              </div>

              <div class="col-lg-4 col-md-6" *ngIf="CurrentContract.Industrialcity">

                <custom-text-box [type]="'text'" name="ContractIndustrialCity" #ContractIndustrialCity="ngModel"
                  [(ngModel)]="CurrentContract.Industrialcity.Name" [label]="'ContractSubmission.IndustrialCity'"
                  autocomplete="" aria-label="Name" [isReadOnly]="true">
                </custom-text-box>

              </div>

              <div class="col-lg-4 col-md-6" *ngIf="CurrentContract.ProductMainfamily">

                <custom-text-box [type]="'text'" name="ContractProductMainFamily" #ContractProductMainFamily="ngModel"
                  [(ngModel)]="CurrentContract.ProductMainfamily.Name" [label]="'ContractSubmission.ProductMainFamily'"
                  autocomplete="" aria-label="Name" [isReadOnly]="true">
                </custom-text-box>

              </div>

              <div class="col-lg-4 col-md-6" *ngIf="CurrentContract.ProductSubFamily">

                <custom-text-box [type]="'text'" name="ContractProductSubFamily" #ContractProductMainFamily="ngModel"
                  [(ngModel)]="CurrentContract.ProductSubFamily.Name" [label]="'ContractSubmission.ProductSubFamily'"
                  autocomplete="" aria-label="Name" [isReadOnly]="true">
                </custom-text-box>

              </div>

              <div class="col-lg-4 col-md-6" *ngIf="CurrentContract.Product">

                <custom-text-box [type]="'text'" name="ContractProduct" #ContractProduct="ngModel"
                  [(ngModel)]="CurrentContract.Product.Name" [label]="'ContractSubmission.Product'" autocomplete=""
                  aria-label="Name" [isReadOnly]="true">
                </custom-text-box>

              </div>

              <div class="col-lg-4 col-md-6">

                <custom-text-box [type]="'text'" name="ContractConstructionAmountValue"
                  #ContractConstructionAmountValue="ngModel" [(ngModel)]="CurrentContract.ConstructionContractStatus"
                  [label]="'ContractSubmission.ConstructionAmountValue'" autocomplete="" aria-label="Name"
                  [isReadOnly]="true">
                </custom-text-box>



              </div>

              <div class="col-lg-4 col-md-6">

                <custom-text-box [type]="'text'" name="ContractLegalStatus" #ContractLegalStatus="ngModel"
                  [(ngModel)]="CurrentContract.LegalStatus" [label]="'OperatingLicenseRequest.LegalStatus'"
                  autocomplete="" aria-label="Name" [isReadOnly]="true">
                </custom-text-box>

              </div>

              <div class="col-lg-4 col-md-6">

                <custom-text-box [type]="'text'" name="ContractPricingdate" #ContractPricingdate="ngModel"
                  [(ngModel)]="CurrentContract.Pricingdate" [label]="'OperatingLicenseRequest.Pricingdate'"
                  autocomplete="" aria-label="Name" [isReadOnly]="true">
                </custom-text-box>

              </div>

              <div class="col-lg-4 col-md-6">

                <custom-text-box [type]="'text'" name="ContractFileNumber" #ContractFileNumber="ngModel"
                  [(ngModel)]="CurrentContract.FileNumber" [label]="'OperatingLicenseRequest.FileNumber'"
                  autocomplete="" aria-label="Name" [isReadOnly]="true">
                </custom-text-box>

              </div>

              <div class="col-lg-4 col-md-6">

                <label>
                  {{'OperatingLicenseRequest.ContractStartingDate' | translate}}
                </label>

                <ngbd-datepicker-popup [(ngModel)]="CurrentContract.ContractStartingDate" [readonly]="true"
                  name="ContractStartingDate">
                </ngbd-datepicker-popup>

              </div>

              <div class="col-lg-4 col-md-6">

                <!-- {{CurrentContract.ContractStartingDate | json}} -->
                <label>
                  {{'OperatingLicenseRequest.ContractExpiryDate' | translate}}
                </label>

                <ngbd-datepicker-popup [(ngModel)]="CurrentContract.ContractExpiryDate" [readonly]="true"
                  name="ContractExpiryDate">
                </ngbd-datepicker-popup>

              </div>

            </div>

            <app-grid *ngIf="contactDetailsfromContract && contactDetailsfromContract.length > 0" [canAdd]="false"
              [canDelete]="false" [canEdit]="false" [modalFormTitle]="'ContractContactsDetails'"
              [tableHeadTitle]="'OperatingLicenseRequest.ContactDetails'" [(data)]="contactDetailsfromContract"
              [columns]="gridcols" [(model)]="gridModel" [canAdd]="false" [canEdit]="false" [canDelete]="false">
            </app-grid>

          </app-info-viewer>

        </div>

        <div class="row">

          <div class="col-lg-6 col-md-6">

            <app-Uploaders-List [uploaders]="CertificateDetails.Documents" [SectionName]="'LicenseReport'"
              [IsLiveChanges]="true" [IsReadOnly]="true">
            </app-Uploaders-List>

          </div>

        </div>

        <!-- Related Contract grid -->
        <app-grid *ngIf="CertificateDetails.AddedContracts && CertificateDetails.AddedContracts.length>0 "
          [modalFormTitle]="'ModonContract.ContractInfo'"
          [tableHeadTitle]="'OperatingLicenseCertificate.RelatedContracts'" [(data)]="CertificateDetails.AddedContracts"
          [columns]="ContractGridCols" [(model)]="ContractGridModel" (modelChange)="ContractGridChanged($event)"
          [template]="gridContent" [canAdd]="false" [canEdit]="false" [canView]="true" [canDelete]="false">


          <ng-container #gridContent *ngIf="ContractGridModel&&CurrentContract">

            <div class="row">

              <div class="col-lg-4 col-md-6" *ngIf="CurrentContract.CR">

                <custom-text-box [type]="'text'" name="CRContract" #CRContract="ngModel"
                  [(ngModel)]="CurrentContract.CR.Name" [label]="'ContractSubmission.CRId'" autocomplete=""
                  aria-label="Name" [isReadOnly]="true">
                </custom-text-box>

              </div>

              <div class="col-lg-4 col-md-6" *ngIf="CurrentContract.Industrialcity">

                <custom-text-box [type]="'text'" name="ContractIndustrialCity" #ContractIndustrialCity="ngModel"
                  [(ngModel)]="CurrentContract.Industrialcity.Name" [label]="'ContractSubmission.IndustrialCity'"
                  autocomplete="" aria-label="Name" [isReadOnly]="true">
                </custom-text-box>

              </div>

              <div class="col-lg-4 col-md-6" *ngIf="CurrentContract.ProductMainfamily">

                <custom-text-box [type]="'text'" name="ContractProductMainFamily" #ContractProductMainFamily="ngModel"
                  [(ngModel)]="CurrentContract.ProductMainfamily.Name" [label]="'ContractSubmission.ProductMainFamily'"
                  autocomplete="" aria-label="Name" [isReadOnly]="true">
                </custom-text-box>

              </div>

              <div class="col-lg-4 col-md-6" *ngIf="CurrentContract.ProductSubFamily">

                <custom-text-box [type]="'text'" name="ContractProductSubFamily" #ContractProductMainFamily="ngModel"
                  [(ngModel)]="CurrentContract.ProductSubFamily.Name" [label]="'ContractSubmission.ProductSubFamily'"
                  autocomplete="" aria-label="Name" [isReadOnly]="true">
                </custom-text-box>

              </div>

              <div class="col-lg-4 col-md-6" *ngIf="CurrentContract.Product">

                <custom-text-box [type]="'text'" name="ContractProduct" #ContractProduct="ngModel"
                  [(ngModel)]="CurrentContract.Product.Name" [label]="'ContractSubmission.Product'" autocomplete=""
                  aria-label="Name" [isReadOnly]="true">
                </custom-text-box>

              </div>

              <div class="col-lg-4 col-md-6">

                <custom-text-box [type]="'text'" name="ContractConstructionAmountValue"
                  #ContractConstructionAmountValue="ngModel" [(ngModel)]="CurrentContract.ConstructionContractStatus"
                  [label]="'ContractSubmission.ConstructionAmountValue'" autocomplete="" aria-label="Name"
                  [isReadOnly]="true">
                </custom-text-box>



              </div>

              <div class="col-lg-4 col-md-6">

                <custom-text-box [type]="'text'" name="ContractLegalStatus" #ContractLegalStatus="ngModel"
                  [(ngModel)]="CurrentContract.LegalStatus" [label]="'OperatingLicenseRequest.LegalStatus'"
                  autocomplete="" aria-label="Name" [isReadOnly]="true">
                </custom-text-box>

              </div>

              <div class="col-lg-4 col-md-6">

                <custom-text-box [type]="'text'" name="ContractPricingdate" #ContractPricingdate="ngModel"
                  [(ngModel)]="CurrentContract.Pricingdate" [label]="'OperatingLicenseRequest.Pricingdate'"
                  autocomplete="" aria-label="Name" [isReadOnly]="true">
                </custom-text-box>

              </div>

              <div class="col-lg-4 col-md-6">

                <custom-text-box [type]="'text'" name="ContractFileNumber" #ContractFileNumber="ngModel"
                  [(ngModel)]="CurrentContract.FileNumber" [label]="'OperatingLicenseRequest.FileNumber'"
                  autocomplete="" aria-label="Name" [isReadOnly]="true">
                </custom-text-box>

              </div>

              <div class="col-lg-4 col-md-6">

                <label>
                  {{'OperatingLicenseRequest.ContractStartingDate' | translate}}
                </label>

                <ngbd-datepicker-popup [(ngModel)]="CurrentContract.ContractStartingDate" [readonly]="true"
                  name="ContractStartingDate">
                </ngbd-datepicker-popup>

              </div>

              <div class="col-lg-4 col-md-6">

                <!-- {{CurrentContract.ContractStartingDate | json}} -->
                <label>
                  {{'OperatingLicenseRequest.ContractExpiryDate' | translate}}
                </label>

                <ngbd-datepicker-popup [(ngModel)]="CurrentContract.ContractExpiryDate" [readonly]="true"
                  name="ContractExpiryDate">
                </ngbd-datepicker-popup>

              </div>

            </div>

            <app-grid *ngIf="contactDetailsfromContract && contactDetailsfromContract.length > 0" [canAdd]="false"
              [canDelete]="false" [canEdit]="false" [modalFormTitle]="'ContractContactsDetails'"
              [tableHeadTitle]="'OperatingLicenseRequest.ContactDetails'" [(data)]="contactDetailsfromContract"
              [columns]="gridcols" [(model)]="gridModel" [canAdd]="false" [canEdit]="false" [canDelete]="false">
            </app-grid>
          </ng-container>
        </app-grid>


        <!-- contact Details grid -->
        <app-grid
          *ngIf="CertificateDetails.Contacts && CertificateDetails.Contacts.length>0 && lookupService.lookupEntities['ldv_contactdetails_ContactDetails']"
          [modalFormTitle]="'Biddings'" [tableHeadTitle]="'OperatingLicenseCertificate.ContactDetails'"
          [(data)]="certificateContactsList" [columns]="gridcols" [(model)]="gridModel" [canAdd]="false"
          [canEdit]="false" [canDelete]="false">
        </app-grid>


      </div>

      <!-- End Stage 2 -->

      <!-- Start Stage 3 | Request Comments-->

      <app-request-comments [regardingID]="Application.Request.Id" [hidden]="ActiveLevelOne !== 3">
      </app-request-comments>

      <!-- End Stage 3 -->

    </div>

  </div>

</div>